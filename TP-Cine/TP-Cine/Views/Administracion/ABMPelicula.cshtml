@using TP_Cine.Models;
@model VerEditarCrearPeliculaModelo

@{Html.RenderPartial("_AdministracionPartial");}

<h1>Administración: Detalle Película</h1>

<!--<form method="post" action="/Administracion/AgregarEditarPelicula">-->
@using (Html.BeginForm("AgregarEditarPelicula", "Administracion", FormMethod.Post, new { enctype = "multipart/form-data" })) {
    <div class="modal-body">
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @if (Model.accion != "agregar")
        {
        <div class="form-group">
            <label>ID:</label>
            @Html.TextBoxFor(m => m.pelicula.IdPelicula, new { @class = "form-control", @placeholder = "id", @readonly = "readonly" })
        </div>
        }
        <div class="form-group">
            <label>Nombre:</label>
            @if (Model.accion != "ver")
            {
                @Html.TextBoxFor(m => m.pelicula.Nombre, new { @class = "form-control", @placeholder = "nombre" })
            }
            else{
                @Html.TextBoxFor(m => m.pelicula.Nombre, new { @class = "form-control", @placeholder = "nombre", @readonly = "readonly" })
            }
            @Html.ValidationMessageFor(m => m.pelicula.Nombre, "", new { @class = "text-danger" })
        </div>
        <div class="form-group">
            <label>Descripción:</label>
            @if (Model.accion != "ver")
            {
                @Html.TextBoxFor(m => m.pelicula.Descripcion, new { @class = "form-control", @placeholder = "descripcion" })
            }
            else
            {
                @Html.TextBoxFor(m => m.pelicula.Descripcion, new { @class = "form-control", @placeholder = "descripcion", @readonly = "readonly" })
            }
            @Html.ValidationMessageFor(m => m.pelicula.Descripcion, "", new { @class = "text-danger" })
        </div>
        <div class="form-group">
            <label>Genero:</label>
            <select id="Generos" name="Generos"
                         @Html.Raw(Model.accion != "ver" ? "" : "disabled='disabled'")
             >
                @foreach (var genero in Model.lista_generos)
                {
                             if (genero.IdGenero == Model.pelicula.IdGenero)
                             {
                        <option value="@genero.IdGenero" selected="selected">@genero.Nombre</option>
                    }
                    else
                    {
                        <option value="@genero.IdGenero">@genero.Nombre</option>
                    }
                }
            </select>

        </div>
        <div class="form-group">
            <label>Calificacion:</label>
            <select id="Calificaciones" name="Calificaciones"  @Html.Raw(Model.accion != "ver" ? "" : "disabled='disabled'")>
                @foreach (var calificacion in Model.lista_calificaciones)
                    {
                        if (calificacion.IdCalificacion == Model.pelicula.IdCalificacion)
                        {
                        <option value="@calificacion.IdCalificacion" selected="selected">@calificacion.Nombre</option>
                    }
                    else
                    {
                        <option value="@calificacion.IdCalificacion">@calificacion.Nombre</option>
                    }
                }
            </select>

        </div>
        <div class="form-group">
            <label>Imágen:</label>
            @if (!string.IsNullOrEmpty(Model.pelicula.Imagen))
            {
                <img src="@Model.pelicula.Imagen" height="150" width="150" class="img-responsive" alt="@Model.pelicula.Nombre" />
            }
            @if (Model.accion != "ver")
            {
                @Html.TextBoxFor(m => m.pelicula.Imagen, new { type = "file", @onchange = "previewFile();",@Value = Model.pelicula.Imagen })
                @Html.ValidationMessageFor(m => m.pelicula.Imagen, "", new { @class = "text-danger" })
            }
            
        </div>
        <div class="form-group">
            <label>Duración:</label>
            @if (Model.accion != "ver")
            {
                @Html.TextBoxFor(m => m.pelicula.Duracion, new { @class = "form-control", @placeholder = "duracion" })
            }
            else
            {
                @Html.TextBoxFor(m => m.pelicula.Duracion, new { @class = "form-control", @placeholder = "duracion", @readonly = "readonly" })
            }
            @Html.ValidationMessageFor(m => m.pelicula.Duracion, "", new { @class = "text-danger" })
        </div>
    </div>
    <div class="modal-footer">
        @if (Model.accion != "ver")
        {
            <button id="agregar" type="submit" class="btn btn-default">@Html.Raw(Model.accion == "editar" ? "Editar" : "Crear'")</button>
        }
    </div>
    <input type="hidden" value="@Model.accion" id="accion" name="accion" />
}
<!--</form>-->

<script src="~/js/jquery.min.js"></script>
<!--<script src="~/js/jquery.validate.min.js"></script>
<script src="~/js/jquery.validate.unobtrusive.min.js"></script>-->
<!--include jQuery Validation Plugin-->
<script src="~/js/jquery.validate.min.js"
        type="text/javascript"></script>   
<script src="~/js/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>